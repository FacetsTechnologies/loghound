function LogHoundLevel(t,e,l){this.id=t,this.text=e.toLowerCase(),this.label=this.text.charAt(0).toUpperCase()+this.text.slice(1),this.enabled=l}function FatalLogHoundLevel(){FatalLogHoundLevel.baseConstructor.call(this,100,"fatal",!0)}function ErrorLogHoundLevel(){ErrorLogHoundLevel.baseConstructor.call(this,90,"error",!0)}function WarnLogHoundLevel(){WarnLogHoundLevel.baseConstructor.call(this,80,"warn",!0)}function InfoLogHoundLevel(){InfoLogHoundLevel.baseConstructor.call(this,70,"info",!0)}function DebugLogHoundLevel(){DebugLogHoundLevel.baseConstructor.call(this,60,"debug",!0)}function TraceLogHoundLevel(){TraceLogHoundLevel.baseConstructor.call(this,50,"trace",!0)}function LogHound(){this.me=this,this.msgCount=0,this.logLevel=LogHoundLevels.DEBUG,this.msgDispMode="brief",this.killSwitch=!1,this.enabled=!0,this.initialised=!1,this.helpEnabled=!1,this.tagNameRegex=new RegExp("^[a-z][-a-z0-9_]+$","i"),this._viewPlates=[],this._msgCountLimit=1e4,this._msgCountMin=100,this._shadeState=!1;var t=FctsTools.parseQueryString();t&&t.lhRun&&this.doSetup()}function LogHoundMessageFilter(t){if(FctsTools.isBlank(t))throw new Error("Message filter ID cannot be blank.");this.id=t}function LogHoundMessageTagFilter(t,e){LogHoundMessageTagFilter.baseConstructor.call(this,"lhMsgTagFilter"),this.tagz=t,this.tagMode=null==e||""==e?"any":e}function LogHoundTextSearchFilter(t){LogHoundTextSearchFilter.baseConstructor.call(this,"lhTxtSearchFilter"),this.searchText=t,this.regex=new RegExp(t,"i")}function LogHoundMessageLevelFilter(){LogHoundTextSearchFilter.baseConstructor.call(this,"lhMsgLvlFilter")}var FctsTools={};FctsTools.windowHeight=function(){return window.innerHeight?window.innerHeight:document.body.offsetHeight},FctsTools.windowWidth=function(){return window.innerWidth?window.innerWidth:document.body.offsetWidth},FctsTools.viewHeight=function(){return Math.max(document.documentElement.clientHeight,document.body.clientHeight)},FctsTools.viewWidth=function(){return Math.max(document.documentElement.clientWidth,document.body.clientWidth)},FctsTools.scrollTop=function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var t=document.body,e=document.documentElement;return e=e.clientHeight?e:t,e.scrollTop},FctsTools.scrollLeft=function(){return document.body.scrollLeft},FctsTools.typeOf=function(t){var e=typeof t;return"object"===e&&(t?"number"!=typeof t.length||t.propertyIsEnumerable("length")||"function"!=typeof t.splice||(e="array"):e="null"),e},FctsTools.extend=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.baseConstructor=e,t.superClass=e.prototype},FctsTools.removeSelected=function(t){for(var e=new Array,l=new Array,o=0;o<t.options.length;o++)t.options[o].selected?e[e.length]=t.options[o]:l[l.length]=t.options[o];return FctsTools.setOptions(t,l),e},FctsTools.getSelected=function(t){var e=new Array;for(var l in t.options)t.options[l].selected&&(e[e.length]=t.options[l]);return e},FctsTools.setOptions=function(t,e){t.options.length=0;for(var l in e)t.options[t.options.length]=e[l]},FctsTools.addOptions=function(t,e){for(var l in e)t.options[t.options.length]=e[l]},FctsTools.moveSelected=function(t,e){FctsTools.addOptions(e,FctsTools.removeSelected(t))},FctsTools.moveAllOptions=function(t,e){for(var l=new Array,o=0;o<t.options.length;o++)l[o]=t.options[o];for(var o=0;o<l.length;o++)e.options[e.options.length]=new Option(l[o].text,l[o].value);t.length=0},FctsTools.getOptionValues=function(t){for(var e=new Array,l=0;l<t.options.length;l++)e[l]=t.options[l].value;return e},FctsTools.sortOptions=function(t,e){for(var l=new Array,o=new Array,s=0;s<t.options.length;s++)l[s]=t.options[s],o[s]=t.options[s].value;t.options.length=0,o.sort(e);for(var s=0;s<o.length;s++)for(var n=0;n<l.length;n++)o[s]!=l[n].value||(t.options[t.options.length]=l[n],l.splice(n--,1))},FctsTools.sortOptionsByValue=function(t){this.sortOptions(t,function(t,e){if(FctsTools.isBlank(t)&&FctsTools.isBlank(e))return 0;if(FctsTools.isBlank(t)||FctsTools.isBlank(e))return FctsTools.isBlank(t)?-1:1;document.all&&(t=new String(t),e=new String(e)),t=t.toLowerCase(),e=e.toLowerCase();for(var l=0;l<t.length;l++)if(t.charCodeAt(l)!=e.charCodeAt(l))return t.charCodeAt(l)-e.charCodeAt(l);return 0})},FctsTools.sortOptionsByText=function(t){this.sortOptions(t,function(t,e){if(FctsTools.isBlank(t)&&FctsTools.isBlank(e))return 0;if(FctsTools.isBlank(t)||FctsTools.isBlank(e))return FctsTools.isBlank(t)?-1:1;document.all&&(t=new String(t),e=new String(e)),t=t.toLowerCase(),e=e.toLowerCase();for(var l=0;l<t.length;l++)if(t.charCodeAt(l)!=e.charCodeAt(l))return t.charCodeAt(l)-e.charCodeAt(l);return 0})},FctsTools.isEmpty=function(t){return!t||0===t.length},FctsTools.isBlank=function(t){return!t||/^\s*$/.test(t)},FctsTools.isString=function(t){return"undefined"!=typeof t&&"[object String]"===Object.prototype.toString.call(t)},FctsTools.isNumber=function(t,e){return e&&FctsTools.isString(t)?!1:!isNaN(parseFloat(t))&&isFinite(t)},FctsTools.isBoolean=function(t){return"undefined"!=typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)},FctsTools.isArray=function(t){return"undefined"!=typeof t&&"[object Array]"===Object.prototype.toString.call(t)},FctsTools.isFunction=function(t){return"undefined"!=typeof t&&"[object Function]"===Object.prototype.toString.call(t)},FctsTools.isObject=function(t){return"undefined"!=typeof t&&"[object Object]"===Object.prototype.toString.call(t)},FctsTools.startsWith=function(t,e){return t.slice(0,e.length)==e},FctsTools.escapeRegex=function(t){if(!arguments.callee.sRE){var e=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+e.join("|\\")+")","g")}return t.replace(arguments.callee.sRE,"\\$1")},FctsTools.addStyleClass=function(t,e){if(null==t.className||""==t.className)return void(t.className=e);var l=t.className.split(" ");for(idx in l)if(l[idx]==e)return;l.push(e),t.className=l.join(" ")},FctsTools.removeStyleClass=function(t,e){if(null!=t.className&&""!=t.className){t.className==e&&(t.className="");var l=t.className.split(" "),o=new Array;for(idx in l)l[idx]!=e&&o.push(l[idx]);t.className=o.join(" ")}},FctsTools.replaceStyleClass=function(t,e,l){this.removeStyleClass(t,e),this.addStyleClass(t,l)},FctsTools.getStyleValue=function(t,e,l){return window.getComputedStyle?getComputedStyle(t,l)[e]:t.currentStyle[e]},FctsTools.parseToBool=function(t,e){if("undefined"==typeof t||null==t)return null;if("boolean"==typeof t)return t;if(!(t instanceof String)&&"string"!=typeof t)return null;if(null!=e&&e instanceof Array)for(var l=0;l<e.length;l++)if(t==e[l])return!0;return"true"==t},FctsTools.preventParentScroll=function(t){FctsTools.isString(t)&&(t=document.getElementById(t));var e=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";t.attachEvent?t.attachEvent("on"+e,function(){}):t.addEventListener&&t.addEventListener(e,function(t){t.stopPropagation(),t.stopImmediatePropagation()},!0)},FctsTools.capitaliseFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},FctsTools.parseQueryString=function(){for(var t=[],e=null,l=/\+/g,o=/([^&=]+)=?([^&]*)/g,s=function(t){return decodeURIComponent(t.replace(l," "))},n=window.location.search.substring(1);e=o.exec(n);){var i=s(e[1]),a=s(e[2]);t[i]=a,t.push([i,a])}return t},FctsTools.preventEvent=function(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1};var LogHoundVer=[];LogHoundVer.major="2",LogHoundVer.minor="5",LogHoundVer.fix="0",LogHoundVer.build="$Rev: 210 $",LogHoundVer.build=LogHoundVer.build.length>5?LogHoundVer.build.substring(5).split(" ")[1]:"beta 1",LogHoundVer.release="",LogHoundVer.getLongText=function(){var t=this.major+"."+this.minor+"."+this.fix;return""!=this.build&&(t=t+"."+this.build),""!=this.release&&(t=t+"."+this.release),t},LogHoundVer.getShortText=function(){return"v"+this.major+"."+this.minor+"."+this.fix+" "+this.release},LogHoundLevel.prototype.getId=function(){return this.id},LogHoundLevel.prototype.getName=function(){return this.text},LogHoundLevel.prototype.getLabel=function(){return this.label},LogHoundLevel.prototype.isEnabled=function(){return this.enabled},LogHoundLevel.prototype.setEnabled=function(t){this.enabled=t};var LogHoundLevels=[];if(LogHoundLevels.getByName=function(t){t=t.toLowerCase();for(var e=0;e<this.length;e++)if(this[e].getName()==t)return this[e];return null},LogHoundLevels.getById=function(t){for(var e=0;e<this.length;e++)if(this[e].getId()==t)return this[e];return null},LogHoundLevels.getLevel=function(t){return null==t?null:FctsTools.isNumber(t)?this.getById(t):FctsTools.isString(t)?this.getByName(t):t instanceof LogHoundLevel?t:null},LogHoundLevels.addLevel=function(t){FctsTools.extend(t,LogHoundLevel);var e=new t;LogHoundLevels[e.getName().toUpperCase()]=e,LogHoundLevels.push(e)},LogHoundLevels.addLevel(FatalLogHoundLevel),LogHoundLevels.addLevel(ErrorLogHoundLevel),LogHoundLevels.addLevel(WarnLogHoundLevel),LogHoundLevels.addLevel(InfoLogHoundLevel),LogHoundLevels.addLevel(DebugLogHoundLevel),LogHoundLevels.addLevel(TraceLogHoundLevel),"undefined"!=typeof LogHoundLevelPreload&&LogHoundLevelPreload instanceof Array)for(var i=0;i<LogHoundLevelPreload.length;i++)LogHoundLevels.addLevel(LogHoundLevelPreload[i]);LogHound.prototype.doSetup=function(){if(document&&document.body)this._doSetup();else{window.logHoundProc={},window.logHoundProc.loadAttempts=5;var t=this;window.logHoundProc.procId=setInterval(function(){window.logHoundProc.loadAttempts--<1&&clearInterval(window.logHoundProc.procId),document&&document.body&&(clearInterval(window.logHoundProc.procId),t._doSetup())},500)}},LogHound.prototype._doSetup=function(){if(!this.killSwitch){this.tagMode="any",this.killSwitch=!0,this.initialised=!0,this.helpEntries=[],this.msgRecords=[],this.msgTags=[],this.msgFilters=[],this.msgFilters.push(new LogHoundMessageLevelFilter);var t=document.createElement("DIV");t.setAttribute("id","lhPlate"),t.setAttribute("class","lhRndCorners"),this.logPlate=document.body.appendChild(t),this.logPlate.lhIsShowing=!0,this._createTitlePanel(),this._createHelpPanel(),this._createControlPanel(),this._createTagPanel(),this._createLogsPanel();for(var e=document.getElementsByClassName("lhBtn"),l=0;l<e.length;l++)FctsTools.addStyleClass(e[l],"lhBtnOut"),e[l].onmouseover=this.buttonMouseOver,e[l].onmouseout=this.buttonMouseOut,e[l].lhBtnState="off";this.setLogLevel(this.logLevel);for(var l=0;l<this._viewPlates.length;l++)this.setPanelDisplay(this._viewPlates[l],this._viewPlates[l].lhDisplayStart);this.setShadeState(!0),setTimeout("window.logHound.show(true)",800),this.logInfo("Log Hound is online...")}},LogHound.prototype._createTitlePanel=function(){this.domTitlePanelPlate=document.createElement("DIV"),this.domTitlePanelPlate.setAttribute("id","lhTitlePanelPlate");var t='<div id="lhTitlePanel" class="lhPlateColor lhRndCorners">';t+='<div id="lhBtnShade" class="lhTitlePanelElmt lhFont lhCtrl lhBtn" title="Toggle Message Panel">v</div>',t+='<div id="lhTitle" class="lhTitlePanelElmt lhFont">Log Hound v'+LogHoundVer.getLongText()+"</div>",t+='<div id="lhTitlePanelSpcr" class="lhTitlePanelElmt lhFont"></div>',t+='<div id="lhBtnHelp" class="lhTitlePanelElmt lhFont lhCtrl lhBtn" title="Toggle Help Panel">?</div>',t+='<div id="lhBtnTags" class="lhTitlePanelElmt lhFont lhCtrl lhBtn" title="Toggle Tags Panel">T</div>',t+="</div>",this.domTitlePanelPlate.innerHTML=t,this.logPlate.appendChild(this.domTitlePanelPlate);var e=this;document.getElementById("lhBtnShade").onclick=function(){e.setShadeState()},this.addHelpEntry(["lhBtnShade","Shade Mode Toggle: Toggles the Log Hound interface between shade display mode and normal display mode."]),document.getElementById("lhBtnHelp").onclick=function(){e.toggleHelp(e.setPanelDisplay(e.domHelpPanelPlate))},this.addHelpEntry(["lhBtnHelp","Help Panel Toggle: Opens and closes the help panel."]),document.getElementById("lhBtnTags").onclick=function(){e.setPanelDisplay(e.domTagCtrlPanelPlate)},this.addHelpEntry(["lhBtnTags","Tag Panel Toggle: Opens and closes the tag control panel."])},LogHound.prototype._createHelpPanel=function(){this.domHelpPanelPlate=document.createElement("DIV"),this.domHelpPanelPlate.setAttribute("id","lhHelpPanelPlate");var t="Mouse over any interface element to see help for that element here.",e='<div id="lhHelpPanel" class="lhPlateColor lhRndCorners lhSmFont">';e+=t,e+="</div>",this.domHelpPanelPlate.innerHTML=e,this.domHelpPanelPlate.lhDfltTxt=t,this.addPanel(this.domHelpPanelPlate)},LogHound.prototype._createControlPanel=function(){this.domCtrlPanelPlate=document.createElement("DIV"),this.domCtrlPanelPlate.setAttribute("id","lhCtrlPanelPlate");var t='<div id="lhCtrlPanel" class="lhPlateColor lhRndCorners">';t+='<div id="lhCtrlRow1">',t+='<div id="lhCtrlMore" class="lhCtrl lhBtn lhFont" title="Show more logs">v</div>',t+='<div id="lhCtrlLess" class="lhCtrl lhBtn lhFont" title="Show less logs">^</div>',t+='<div id="lhCtrlLvlSelectPlate"><select id="lhLvlSelect" name="lhLvlSelect" class="lhSmFont" title="Select level of logging"></select></div>',t+='<div id="lhCtrlMsgDispModeBtn" class="lhDispModeLable lhCtrl lhBtn lhSmFont" title="Toggle message display mode">D</div>',t+='<div id="lhBtnClear" class="lhCtrl lhBtn lhSmFont" title="Clear All Logs">Clr</div>',t+='<div id="lhLogCountLimitPlate"><div id="lhLogCountLimitBtn" class="lhCtrl lhBtnType1 lhSmFont" title="Log message count limit">2000</div></div>',t+='<div id="lhCtrlSearchPlate">',t+='<input type="text" id="lhSearchField" name="lhSearchField" class="lhSearchField lhSmFont" onkeyup="window.logHound.search()" title="Type to search..." placeholder="Type to search..."/>',t+="</div></div>",t+='<div id="lhCtrlRow2">',t+='<div class="lhSpacer"></div><div id="lhCtrlLvlPlate">',t+='<div id="lhCtrlLvlFatal" class="lhFatalMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Fatal">0</div>',t+='<div id="lhCtrlLvlError" class="lhErrorMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Error">0</div>',t+='<div id="lhCtrlLvlWarn" class="lhWarnMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Warn">0</div>',t+='<div id="lhCtrlLvlInfo" class="lhInfoMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Info">0</div>',t+='<div id="lhCtrlLvlDebug" class="lhDebugMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Debug">0</div>',t+='<div id="lhCtrlLvlTrace" class="lhTraceMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Trace">0</div>',t+='</div><div class="lhSpacer"></div>',t+="</div></div>",this.domCtrlPanelPlate.innerHTML=t,this.addPanel(this.domCtrlPanelPlate,!0),this.addHelpEntry(["lhSearchField","Search text entry: Message text is matched as you type, with non-matching log messages being automatically hidden."]),this.addHelpEntry(["lhCtrlLvlPlate","Log level visibility controls: Controls which log level messages will be visible in the message pane."]);for(var e=this,l=document.getElementById("lhLvlSelect"),o=null,s=0;s<LogHoundLevels.length;s++)o=LogHoundLevels[s],l.options[l.length]=new Option(o.getName(),o.getId());FctsTools.sortOptionsByValue(l,function(t,e){return parseInt(e,10)-parseInt(t,10)}),l.onchange=function(){e.setLogLevel(parseInt(this.value,10))},this.addHelpEntry(["lhLvlSelect","Level Select: Levels are in descending order. Only messages corresponding to the level shown and those above will be logged after change."]),this.searchField=document.getElementById("lhSearchField"),document.getElementById("lhCtrlMore").onclick=function(){e.adjustMessagePaneSize(!0)},this.addHelpEntry(["lhCtrlMore","Show more messages: Lengthens the log message pane to show more messages."]),document.getElementById("lhCtrlLess").onclick=function(){e.adjustMessagePaneSize(!1)},this.addHelpEntry(["lhCtrlLess","Show less messages: Shortens the log message pane to show fewer messages."]);for(var n=document.getElementsByClassName("lhCtrlLvl"),i=function(){e.showMessageLevel(this.id.slice(9))},s=0;s<n.length;s++)n[s].onclick=i;document.getElementById("lhCtrlMsgDispModeBtn").onclick=function(){e.setMessageLayout()},this.addHelpEntry(["lhCtrlMsgDispModeBtn","Message detail toggle: Toggles the message pane between normal message display and detailed message display."]);var a=document.getElementById("lhBtnClear");a.onclick=function(){e.clearLogs(!1)},this.addHelpEntry(["lhBtnClear","Clears all existing log messages after confirmation by user."]);var r=document.getElementById("lhLogCountLimitBtn");r.onclick=function(){e.setMessageCountLimit()},this.addHelpEntry(["lhLogCountLimitBtn","Sets the log message count limit (cannot be greater than "+this._msgCountLimit+" or less than "+this._msgCountMin+"). The oldest messages will be deleted from memory."])},LogHound.prototype._createTagPanel=function(){this.domTagCtrlPanelPlate=document.createElement("DIV"),this.domTagCtrlPanelPlate.setAttribute("id","lhTagCtrlPanelPlate");var t='<div id="lhTagCtrlPanel" class="lhPlateColor lhRndCorners">';t+='<div class="lhSpacer"></div>',t+='<div id="lhAvailTagsPlate">',t+='<span class="lhTagsHdr lhSmFont">Tags:</span>',t+='<div><select id="lhAvailTagsSelect" class="lhSmFont" multiple="multiple" size="4"></select></div>',t+="</div>",t+='<div id="lhCtrlTagsPlate">',t+='<span id="lhTagCtrlAddBtn" class="lhTagCtrl lhBtn lhFont" title="Add Selected">&gt;</span>',t+='<span id="lhTagCtrlAddAllBtn" class="lhTagCtrl lhBtn lhFont" title="Add All">&gt;&gt;</span>',t+='<span id="lhTagCtrlRemBtn" class="lhTagCtrl lhBtn lhFont" title="Remove Selected">&lt;</span>',t+='<span id="lhTagCtrlRemAllBtn" class="lhTagCtrl lhBtn lhFont" title="Remove All">&lt;&lt;</span>',t+="</div>",t+='<div id="lhViewTagsPlate">',t+='<span class="lhTagsHdr lhSmFont">Viewing:</span>',t+='<div><select id="lhViewTagsSelect" class="lhSmFont" multiple="multiple" size="4"></select></div>',t+="</div>",t+='<div id="lhModTagsPlate">',t+='<span id="lhTagCtrlAnyBtn" class="lhTagCtrl lhSmFont lhBtn" title="Any">A</span>',t+='<span id="lhTagCtrlIntBtn" class="lhTagCtrl lhSmFont lhBtn" title="Intersection">I</span>',t+='<span id="lhTagCtrlOnyBtn" class="lhTagCtrl lhSmFont lhBtn" title="Only">O</span>',t+='<span id="lhTagCtrlExcBtn" class="lhTagCtrl lhSmFont lhBtn" title="Exclusion">E</span>',t+='</div><div class="lhSpacer"></div></div>',this.domTagCtrlPanelPlate.innerHTML=t,this.addPanel(this.domTagCtrlPanelPlate),this.addHelpEntry(["lhAvailTagsSelect","Available Tags Select: Lists all unique available tags assigned to any messages."]),this.addHelpEntry(["lhViewTagsSelect","View Tags Select: Tags listed here will affect what messages are visible, depending on the active tag modifier."]),this.addHelpEntry(["lhTagCtrlAddBtn","Add Selected Tags: Moves tags selected in the available tags box to the viewing box."]),this.addHelpEntry(["lhTagCtrlAddAllBtn","Add All Tags: Moves all tags in the available tags box to the viewing box."]),this.addHelpEntry(["lhTagCtrlRemBtn","Remove Selected Tags: Moves tags selected in the viewing tags box to the available tags box."]),this.addHelpEntry(["lhTagCtrlRemAllBtn","Remove All Tags: Moves all tags in the viewing tags box back to the available tags box."]),this.tagsSelectElmt=document.getElementById("lhAvailTagsSelect"),this.tagsViewElmt=document.getElementById("lhViewTagsSelect");var e=this;document.getElementById("lhTagCtrlAddBtn").onclick=function(){e.moveTagAssignments("add")},document.getElementById("lhTagCtrlRemBtn").onclick=function(){e.moveTagAssignments("rem")},document.getElementById("lhTagCtrlRemAllBtn").onclick=function(){e.moveTagAssignments("remAll")},document.getElementById("lhTagCtrlAddAllBtn").onclick=function(){e.moveTagAssignments("addAll")},this.tagModBtns=[],this.tagModBtnAny=document.getElementById("lhTagCtrlAnyBtn"),this.tagModBtns[this.tagModBtns.length]=this.tagModBtnAny,this.tagModBtnAny.lhTagMode="any",this.tagModBtnAny.onclick=function(){e.activateTagMode("any")},this.addHelpEntry(["lhTagCtrlAnyBtn",'"Any" Tags Modifier: Messages with any of the viewing tags will be visible.']),this.tagModBtnInt=document.getElementById("lhTagCtrlIntBtn"),this.tagModBtns[this.tagModBtns.length]=this.tagModBtnInt,this.tagModBtnInt.lhTagMode="int",this.tagModBtnInt.onclick=function(){e.activateTagMode("int")},this.addHelpEntry(["lhTagCtrlIntBtn",'"Intersection" Tags Modifier: Only messages that have all of the viewing tags will be visible.']),this.tagModBtnOny=document.getElementById("lhTagCtrlOnyBtn"),this.tagModBtns[this.tagModBtns.length]=this.tagModBtnOny,this.tagModBtnOny.lhTagMode="ony",this.tagModBtnOny.onclick=function(){e.activateTagMode("ony")},this.addHelpEntry(["lhTagCtrlOnyBtn",'"Only" Tags Modifier: Only messages that have all of the viewing tags and no other tags will be visible.']),this.tagModBtnExc=document.getElementById("lhTagCtrlExcBtn"),this.tagModBtns[this.tagModBtns.length]=this.tagModBtnExc,this.tagModBtnExc.lhTagMode="exc",this.tagModBtnExc.onclick=function(){e.activateTagMode("exc")},this.addHelpEntry(["lhTagCtrlExcBtn",'"Exclusion" Tags Modifier: Only messages that have none of the viewing tags will be visible.']),this.activateTagMode("any")},LogHound.prototype._createLogsPanel=function(){this.domLogsPanelPlate=document.createElement("DIV"),this.domLogsPanelPlate.setAttribute("id","lhLogsPanelPlate");var t='<div id="lhLogsPanel" class="lhPlateColor lhRndCorners">';t+='<div id="lhLogsPanelBody"></div>',t+="</div>",this.domLogsPanelPlate.innerHTML=t,this.addPanel(this.domLogsPanelPlate,!0);var e=document.getElementById("lhLogsPanelBody");e.addEventListener("mousewheel",function(t){t.cancelBubble=!0},!1),FctsTools.preventParentScroll(e)},LogHound.prototype.addPanel=function(t,e){"string"==typeof t&&(t=document.getElementById(t)),t.lhShadeState=!1,t.lhDisplayStart=!!e,t.lhDisplayStyle="none",this.logPlate.appendChild(t),this._viewPlates.push(t)},LogHound.prototype.buttonMouseOver=function(){FctsTools.removeStyleClass(this,"lhBtnOut"),FctsTools.removeStyleClass(this,"lhBtnOn"),FctsTools.addStyleClass(this,"lhBtnOver")},LogHound.prototype.buttonMouseOut=function(){FctsTools.removeStyleClass(this,"lhBtnOver"),"on"==this.lhBtnState?FctsTools.addStyleClass(this,"lhBtnOn"):FctsTools.replaceStyleClass(this,"lhBtnOn","lhBtnOut")},LogHound.prototype.activateTagMode=function(t){for(var e=0;e<this.tagModBtns.length;e++)this.tagModBtns[e].lhTagMode==t?(this.tagModBtns[e].lhBtnState="on",FctsTools.addStyleClass(this.tagModBtns[e],"lhBtnOn"),this.setTagFilterMode(t)):(this.tagModBtns[e].lhBtnState="off",FctsTools.removeStyleClass(this.tagModBtns[e],"lhBtnOn"),FctsTools.replaceStyleClass(this.tagModBtns[e],"lhBtnOn","lhBtnOut"))},LogHound.prototype.addHelpEntry=function(t){this.helpEntries[this.helpEntries.length]=t},LogHound.prototype.toggleHelp=function(t){if(this.helpEnabled!=!!t)if(this.helpEnabled=!!t,t)for(var e=this,l=document.getElementById("lhHelpPanel"),o=this.helpEntries.length,s=0;o>s;s++){var n=document.getElementById(this.helpEntries[s][0]);n.lhHelpTxt=this.helpEntries[s][1],n.lhOrigMouseOver=n.onmouseover,n.lhOrigMouseOut=n.onmouseout,n.onmouseover=function(){"undefined"!=typeof this.lhOrigMouseOver&&null!=this.lhOrigMouseOver&&this.lhOrigMouseOver(),l.innerHTML=this.lhHelpTxt},n.onmouseout=function(){"undefined"!=typeof this.lhOrigMouseOut&&null!=this.lhOrigMouseOut&&this.lhOrigMouseOut(),l.innerHTML=e.domHelpPanelPlate.lhDfltTxt}}else for(var n=null,o=this.helpEntries.length,s=0;o>s;s++)n=document.getElementById(this.helpEntries[s][0]),n.lhHelpTxt=this.helpEntries[s][1],n.onmouseover=n.lhOrigMouseOver,n.onmouseout=n.lhOrigMouseOut},LogHound.prototype.setMessageCountLimit=function(t){var e=document.getElementById("lhLogCountLimitBtn"),l=e.innerHTML,o="";if(!t)for(;;){if(t=prompt(o+"Enter new message limit count",l),FctsTools.isBlank(t)){t=l;break}if(FctsTools.isNumber(t))if(t>this._msgCountLimit)o="The count value cannot be greater than "+this._msgCountLimit+".\n";else{if(!(t<this._msgCountMin))break;o="The count value cannot be less than "+this._msgCountMin+".\n"}else o="The count value must be a number.\n"}e.innerHTML=t},LogHound.prototype.setMessageLayout=function(t){if(null==t)this.msgDispMode="brief"==this.msgDispMode?"detail":"brief";else{if(!(t instanceof String||"string"==typeof t))return!1;if(this.msgDispMode==t)return!1;("brief"==t||"detail"==t)&&(this.msgDispMode=t)}if(!this.initialised||!this.enabled)return!1;for(var e=document.getElementsByClassName("lhMsgRecBrief"),l=e.length,o=0;l>o;o++)e[o].style.display="brief"==this.msgDispMode?"":"none";for(var s=document.getElementsByClassName("lhMsgRecDetail"),l=s.length,o=0;l>o;o++)s[o].style.display="brief"==this.msgDispMode?"none":"";return!0},LogHound.prototype.getMessageLayout=function(){return this.msgDispMode},LogHound.prototype.setTagFilterMode=function(t){this.tagMode="any"!=t&&"int"!=t&&"exc"!=t&&"ony"!=t?"any":t,this.addMsgFilter(new LogHoundMessageTagFilter(FctsTools.getOptionValues(this.tagsViewElmt),this.tagMode)),this.applyMsgFilters()},LogHound.prototype.setKillSwitch=function(t){this.killSwitch=null!=t&&0==t?!1:!0},LogHound.prototype.enableLogging=function(t){return this.initialised?void(this.enabled=null!=t&&0==t?!1:!0):!1},LogHound.prototype.isLoggingEnabled=function(){return this.enabled},LogHound.prototype.show=function(t){this.initialised&&this.enabled&&(t=FctsTools.parseToBool(t,["show"]),null==t&&(t=!this.logPlate.lhIsShowing),t?(this.logPlate.lhIsShowing=!0,this.logPlate.style.display="table",this.interfaceMonitor("start")):(this.logPlate.lhIsShowing=!1,this.interfaceMonitor("stop"),this.logPlate.style.display="none"))},LogHound.prototype.isShowing=function(){return this.logPlate.lhIsShowing},LogHound.prototype.getLogLevel=function(){return this.logLevel},LogHound.prototype.setLogLevel=function(t){if(t=LogHoundLevels.getLevel(t),null!=t){if(this.logLevel=t,!this.initialised||!this.enabled)return!1;var e=document.getElementById("lhLvlSelect");if(t.getId()!=e.options[e.selectedIndex].value)for(var l=0;l<e.options.length;l++)t.getId()==e.options[l].value&&(e.selectedIndex=l)}},LogHound.prototype.interfaceMonitor=function(t){this.initialised&&this.enabled&&(t=FctsTools.parseToBool(t,["start"]),null==t&&(t=!this.debugWindowMonitorRef),t?this.debugWindowMonitorRef=setInterval("window.logHound.stickLogPlateTopRight()",200):(clearInterval(this.debugWindowMonitorRef),this.debugWindowMonitorRef=null))},LogHound.prototype.showMessageLevel=function(t,e){var l=null;if("number"==typeof t||t instanceof String||"string"==typeof t)l=LogHoundLevels.getLevel(t);else{if(!(t instanceof LogHoundLevel))return!1;l=t}e=FctsTools.parseToBool(e,["show"]);var o=document.getElementById("lhCtrlLvl"+FctsTools.capitaliseFirstLetter(l.getName()));e=null==e?!l.isEnabled():e,e!=o.isShowing&&(e?(FctsTools.removeStyleClass(o,"lhCtrlLvlOff"),l.setEnabled(!0)):(FctsTools.addStyleClass(o,"lhCtrlLvlOff"),l.setEnabled(!1)),this.applyMsgFilters())},LogHound.prototype.addMsgFilter=function(t){if(!(t.getId&&t instanceof LogHoundMessageFilter))return void alert("Argumented object is not a LogHoundMessageFilter.");for(var e=[],l=null,o=0;o<this.msgFilters.length;o++)l=this.msgFilters[o],l.getId()!=t.getId()&&e.push(l);this.msgFilters=e,this.msgFilters.push(t)},LogHound.prototype.applyMsgFilters=function(){for(var t=this.msgRecords.length,e=0;t>e;e++)this.filterMessage(this.msgRecords[e])},LogHound.prototype.filterMessage=function(t){t.element.style.display=this.isMessageFiltered(t)?"block":"none"},LogHound.prototype.isMessageFiltered=function(t){for(var e=this.msgFilters.length,l=0;e>l;l++)if(!this.msgFilters[l].showMessage(t))return!1;return!0},LogHound.prototype.setShadeState=function(t){if(this.initialised&&this.enabled&&(this._shadeState="none"==this.domLogsPanelPlate.style.display,t=FctsTools.parseToBool(t),t=null==t?!this._shadeState:t,this._shadeState!=t)){for(var e=document.getElementById("lhBtnShade"),l=0;l<this._viewPlates.length;l++){var o=this._viewPlates[l];t?(o.lhShadeSave="none"!=FctsTools.getStyleValue(o,"display"),this.setPanelDisplay(o,!1),o.lhShadeState=!0):(o.lhShadeState=!1,this.setPanelDisplay(o,o.lhShadeSave))}e.innerHTML=t?"v":"^",this._shadeState=t}},LogHound.prototype.isShaded=function(){this._shadeState},LogHound.prototype.setPanelDisplay=function(t,e){if(!t.lhShadeState&&this.initialised&&this.enabled){var l=FctsTools.getStyleValue(t,"display");"none"==t.lhDisplayStyle&&(t.lhDisplayStyle=l);var o="none"!=l;if(e=FctsTools.parseToBool(e),e=null==e?!o:e,o!=e)return t.style.display=e?t.lhDisplayStyle:"none",e}},LogHound.prototype.adjustMessagePaneSize=function(t){if(!this._shadeState&&this.initialised&&this.enabled){if("boolean"==typeof t)t=t?75:-75;else if(t instanceof String||"string"==typeof t)t=FctsTools.parseToBool(t,["more"]),t=t?75:-75;else if("number"!=typeof t)return!1;return this.setMessagePaneSize(this.domLogsPanelPlate.offsetHeight+t)}},LogHound.prototype.setMessagePaneSize=function(t){if(!this._shadeState&&this.initialised&&this.enabled){if("number"!=typeof t)return!1;var e=document.getElementById("lhLogsPanelBody"),l=parseInt(FctsTools.getStyleValue(e,"height"),10);return l==t||t>600||75>t?!1:void(e.style.height=t+"px")}},LogHound.prototype.stickLogPlateTopRight=function(){var t=this.logPlate.offsetWidth,e=FctsTools.scrollTop(),l=FctsTools.scrollLeft();this.logPlate.style.left=FctsTools.viewWidth()-t+l+"px",this.logPlate.style.top=e+"px",this.logPlate.style.zIndex="5000"},LogHound.prototype.stickLogPlateBottomLeft=function(){var t=this.logPlate.offsetHeight,e=FctsTools.windowHeight(),l=FctsTools.scrollTop();this.logPlate.style.left=0,this.logPlate.style.top=e-t+l,this.logPlate.style.zIndex=5e3},LogHound.prototype.search=function(t){FctsTools.isBlank(t)?t=this.searchField.value:this.searchField.value=t,FctsTools.isBlank(t)&&(t=""),t=FctsTools.escapeRegex(t);var e=new LogHoundTextSearchFilter(t);this.addMsgFilter(e),this.applyMsgFilters()},LogHound.prototype.addTags=function(t){if(null==t||!t.length||t.length<1)return!0;for(var e=0;e<t.length;e++)if(!this.tagNameRegex.test(t[e]))return!1;this.tagsSelectElmt=document.getElementById("lhAvailTagsSelect");t:for(var e=0;e<t.length;e++){for(var l=0;l<this.msgTags.length;l++)if(t[e].toLowerCase()==this.msgTags[l].toLowerCase())continue t;FctsTools.isBlank(t[e])||(this.msgTags.push(t[e]),this.tagsSelectElmt.options[this.tagsSelectElmt.length]=new Option(t[e],t[e]))}return FctsTools.sortOptionsByText(this.tagsSelectElmt),!0},LogHound.prototype.logTrace=function(){this.log(LogHoundLevels.TRACE,arguments)},LogHound.prototype.logDebug=function(){this.log(LogHoundLevels.DEBUG,arguments)},LogHound.prototype.logInfo=function(){this.log(LogHoundLevels.INFO,arguments)},LogHound.prototype.logWarn=function(){this.log(LogHoundLevels.WARN,arguments)},LogHound.prototype.logError=function(){this.log(LogHoundLevels.ERROR,arguments)},LogHound.prototype.logFatal=function(){this.log(LogHoundLevels.FATAL,arguments)},LogHound.prototype.parseLoggingArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var l=[],e=0;e<t.length;e++)if(null!=t[e])if("object"!=typeof t[e]||t[e]instanceof Array||!t[e].length)if(t[e]instanceof Array){l.tags=t[e];for(var o=[],s=0;s<l.tags.length;s++)FctsTools.isBlank(l.tags[s])||(o[o.length]=l.tags[s]);l.tags=o}else t[e]instanceof LogHoundLevel?l.level=t[e]:t[e]instanceof String||"string"==typeof t[e]?l.text=t[e]:t[e]instanceof Error&&(l.error=t[e]);else for(var n=0;n<t[e].length;n++)t[t.length]=t[e][n];return l},LogHound.prototype._updateLogTotals=function(t){if(t)this.msgRecords[t.getName()+"Count"]||(this.msgRecords[t.getName()+"Count"]=0,this.msgRecords[t.getName()+"CtrlBtn"]=document.getElementById("lhCtrlLvl"+t.getLabel())),this.msgRecords[t.getName()+"Count"]++,this.msgRecords[t.getName()+"CtrlBtn"].innerHTML=this.msgRecords[t.getName()+"Count"];else for(var e=LogHoundLevels.length,l=0;e>l;l++)t=LogHoundLevels[l],this.msgRecords[t.getName()+"Count"]||(this.msgRecords[t.getName()+"Count"]=0,this.msgRecords[t.getName()+"CtrlBtn"]=document.getElementById("lhCtrlLvl"+t.getLabel())),this.msgRecords[t.getName()+"Count"]=0,this.msgRecords[t.getName()+"CtrlBtn"].innerHTML=0
},LogHound.prototype.log=function(){if(!this.initialised||!this.enabled)return!1;var t=this.parseLoggingArgs(arguments);if(t.tags=null==t.tags?{}:t.tags,t.timestamp=new Date,null==t.level||this.logLevel.getId()>t.level.getId())return!1;if(FctsTools.isBlank(t.text))return!1;if(!this.addTags(t.tags))return!1;t.number=this.msgCount++,this.msgRecords.push(t),this._updateLogTotals(t.level);var e=t.number%2==0?"lhLogMsgRow1":"lhLogMsgRow2",l=document.createElement("DIV"),o=FctsTools.capitaliseFirstLetter(t.level.getName()),s="logmsg"+t.number;l.setAttribute("id",s),l.setAttribute("class","lh"+o+"Msg logMsg "+e),l.setAttribute("className","lh"+o+"Msg logMsg "+e),l.setAttribute("lhLogLevel",t.level.getName()),l.style.display=1==t.level.isEnabled()?"block":"none";var n=t.text;null!=t.error&&(n+="<br/><hr/>",n+="Error: "+t.error.name+" at line "+t.error.lineNumber+"<br/>",n+="Message: "+t.error.message+"<br/>",null!=t.error.stack&&(n+="Stack:<br/>"+t.error.stack.replace("\n","<br/>")));var i="detail"==this.msgDispMode?"":"none",a='<table id="lhMsgDetail_'+t.number+'" class="lhMsgRecDetail" style="display:'+i+';"><tr>';a+='<td class="lhMsgNum2 lhLogMsgElmt lhSmFont"><div class="lh'+o+'Msg">'+t.number+"</div></td>",a+='<td class="lhMsgLvl lhLogMsgElmt lhSmFont"><div class="lh'+o+'Msg">'+t.level.getName()+"<div></td>",a+='<td class="lhMsgTime lhLogMsgElmt lhSmFont lh'+o+'Msg">'+this.getTimestampText(t.timestamp)+"</td>",a+='<td class="lhMsgTags lhLogMsgElmt lhSmFont"><table><tr><td class="lhSmFont lh'+o+'Msg">'+(t.tags instanceof Array?t.tags:"")+"</td></tr></table></td>",a+="</tr><tr>",a+='<td colspan="4" class="lhMsgTxtDetail lhLogMsgElmt lhFont"><table><tr><td class="lhSmFont lh'+o+'Msg">'+n+"</td></tr></table></td>",a+="</tr></table>";var r="brief"==this.msgDispMode?"":"none",g='<table id="lhMsgBrief_'+t.number+'" class="lhMsgRecBrief" style="display:'+r+'"><tr>';g+='<td class="lhMsgNum lhLogMsgElmt lhSmFont"><div class="lh'+o+'Msg">'+t.number+"</div></td>",g+='<td class="lhMsgTime lhLogMsgElmt lhSmFont lh'+o+'Msg">'+this.getTimestampText(t.timestamp)+"</td>",g+='<td class="lhMsgTxt lhLogMsgElmt lhSmFont"><table><tr><td class="lhSmFont lh'+o+'Msg">'+n+"</td></tr></table></td>",g+="</tr></table>",l.innerHTML=a+g;var d=document.getElementById("lhLogsPanelBody"),h=d.childNodes;null==h||h.length<1?d.appendChild(l):d.insertBefore(l,h[0]);var u="lhMsg"+("detail"==this.msgDispMode?"Detail":"Brief")+"_"+t.number,c=document.getElementById(u);return c.style.display="none",c.style.display="",t.element=document.getElementById(s),this.filterMessage(t),!0},LogHound.prototype.clearLogs=function(t){if(t||confirm("Clear all logs?")){for(var e=document.getElementById("lhLogsPanelBody");e.hasChildNodes();)e.removeChild(e.lastChild);for(var l=LogHoundLevels.length,o=0;l>o;o++)this.msgRecords[LogHoundLevels[o].getName()]=0;var s=this.msgRecords;return this.msgRecords=[],this._updateLogTotals(),this.msgTags=[],this.tagsSelectElmt.selectedIndex=-1,this.tagsSelectElmt.options.length=0,this.tagsViewElmt.selectedIndex=-1,this.tagsViewElmt.options.length=0,this.logInfo("All messages have been cleared."),s}},LogHound.prototype.getMessageRecords=function(){return this.msgRecords},LogHound.prototype.getTimestampText=function(t){var e=t.getHours(),l=t.getMinutes(),o=t.getSeconds(),s=t.getMilliseconds(),n=(10>e?"0"+e:e)+":";return n+=(10>l?"0"+l:l)+":",n+=(10>o?"0"+o:o)+".",n+=10>s?"00"+s:100>s?"0"+s:s},LogHound.prototype.moveTagAssignments=function(t){if("add"==t){if(this.tagsSelectElmt.options.length<1||this.tagsSelectElmt.selectedIndex<0)return;FctsTools.moveSelected(this.tagsSelectElmt,this.tagsViewElmt)}else if("addAll"==t){if(this.tagsSelectElmt.options.length<1)return;FctsTools.moveAllOptions(this.tagsSelectElmt,this.tagsViewElmt)}else if("rem"==t){if(this.tagsViewElmt.options.length<1||this.tagsViewElmt.selectedIndex<0)return;FctsTools.moveSelected(this.tagsViewElmt,this.tagsSelectElmt)}else if("remAll"==t){if(this.tagsViewElmt.options.length<1)return;FctsTools.moveAllOptions(this.tagsViewElmt,this.tagsSelectElmt)}FctsTools.sortOptionsByText(this.tagsSelectElmt),FctsTools.sortOptionsByText(this.tagsViewElmt),this.addMsgFilter(new LogHoundMessageTagFilter(FctsTools.getOptionValues(this.tagsViewElmt),this.tagMode)),this.applyMsgFilters()},LogHound.prototype.getViewTags=function(){return FctsTools.getOptionValues(this.tagsViewElmt)},LogHound.prototype.getAvailTags=function(){return FctsTools.getOptionValues(this.tagsSelectElmt)},LogHoundMessageFilter.prototype.getId=function(){return this.id},LogHoundMessageFilter.prototype.showMessage=function(){return!0},FctsTools.extend(LogHoundMessageTagFilter,LogHoundMessageFilter),LogHoundMessageTagFilter.prototype.showMessage=function(t){if(null==this.tagz||this.tagz.length<1)return!0;if("int"==this.tagMode){if(!(t.tags instanceof Array))return!1;if(t.tags.length<this.tagz.length)return!1}if("ony"==this.tagMode&&t.tags.length!=this.tagz.length)return!1;for(var e=!1,l=!1,o=0;o<this.tagz.length;o++){l=!1;for(var s=0;s<t.tags.length;s++)if(e=t.tags[s].toLowerCase()==this.tagz[o].toLowerCase(),"int"==this.tagMode||"ony"==this.tagMode)l=l||e;else{if(e&&"any"==this.tagMode)return!0;if(e&&"exc"==this.tagMode)return!1}if(("int"==this.tagMode||"ony"==this.tagMode)&&!l)return!1}return"exc"==this.tagMode||"int"==this.tagMode||"ony"==this.tagMode},LogHoundMessageTagFilter.prototype.hasTag=function(t,e){for(var l=0;l<e.length;l++)if(e[tagIdx]==t)return!0;return!1},FctsTools.extend(LogHoundTextSearchFilter,LogHoundMessageFilter),LogHoundTextSearchFilter.prototype.showMessage=function(t){return""==this.searchText?!0:t.text.search(this.regex)>=0},FctsTools.extend(LogHoundMessageLevelFilter,LogHoundMessageFilter),LogHoundMessageLevelFilter.prototype.showMessage=function(t){return t.level.isEnabled()},null==window.logHound&&(window.logHound=new LogHound,window.loghound=window.logHound);